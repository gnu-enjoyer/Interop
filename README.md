# FFI

Foreign function interface examples w/ shared objects (ELF) via Nim for C POSIX ABI interop.

## Usage:

`make && make cxx`

---

```bash
$ readelf -Wl dyn.so

Elf file type is DYN (Shared object file)
Entry point 0x0
There are 11 program headers, starting at offset 64

Program Headers:
  Type           Offset   VirtAddr           PhysAddr           FileSiz  MemSiz   Flg Align
  LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x0009b0 0x0009b0 R   0x1000
  LOAD           0x001000 0x0000000000001000 0x0000000000001000 0x00d015 0x00d015 R E 0x1000
  LOAD           0x00f000 0x000000000000f000 0x000000000000f000 0x002628 0x002628 R   0x1000
  LOAD           0x011df8 0x0000000000012df8 0x0000000000012df8 0x000308 0x0112b0 RW  0x1000
  DYNAMIC        0x011e10 0x0000000000012e10 0x0000000000012e10 0x0001c0 0x0001c0 RW  0x8
  NOTE           0x0002a8 0x00000000000002a8 0x00000000000002a8 0x000020 0x000020 R   0x8
  NOTE           0x0002c8 0x00000000000002c8 0x00000000000002c8 0x000024 0x000024 R   0x4
  GNU_PROPERTY   0x0002a8 0x00000000000002a8 0x00000000000002a8 0x000020 0x000020 R   0x8
  GNU_EH_FRAME   0x00f618 0x000000000000f618 0x000000000000f618 0x00049c 0x00049c R   0x4
  GNU_STACK      0x000000 0x0000000000000000 0x0000000000000000 0x000000 0x000000 RW  0x10
  GNU_RELRO      0x011df8 0x0000000000012df8 0x0000000000012df8 0x000208 0x000208 R   0x1
```  

```bash
$ readelf -Wl static.so

Elf file type is DYN (Shared object file)
Entry point 0x0
There are 7 program headers, starting at offset 64

Program Headers:
  Type           Offset   VirtAddr           PhysAddr           FileSiz  MemSiz   Flg Align
  LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x000e38 0x000e38 R   0x1000
  LOAD           0x001000 0x0000000000001000 0x0000000000001000 0x00e331 0x00e331 R E 0x1000
  LOAD           0x010000 0x0000000000010000 0x0000000000010000 0x002180 0x002180 R   0x1000
  LOAD           0x012e10 0x0000000000013e10 0x0000000000013e10 0x000518 0x0119b8 RW  0x1000
  DYNAMIC        0x012e40 0x0000000000013e40 0x0000000000013e40 0x000190 0x000190 RW  0x8
  GNU_STACK      0x000000 0x0000000000000000 0x0000000000000000 0x000000 0x000000 RW  0x10
  GNU_RELRO      0x012e10 0x0000000000013e10 0x0000000000013e10 0x0001f0 0x0001f0 R   0x1
```